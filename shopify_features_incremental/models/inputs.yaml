# This is a sample file, for detailed reference see: https://rudderlabs.github.io/pywht/
inputs:
  - name: rsIdentifies
    table: RUDDERSTACK_EVENTS.SHOPIFY_PRD.IDENTIFIES 
    occurred_at_col: timestamp
    ids:
      - select: "user_id"
        type: user_id
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
      - select: "upper(email)"
        type: email
        entity: user
  - name: rsTracks
    table: RUDDERSTACK_EVENTS.SHOPIFY_PRD.TRACKS
    occurred_at_col: timestamp
    ids:
      - select: "user_id"
        type: user_id
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
  - name: rsPages
    table: RUDDERSTACK_EVENTS.SHOPIFY_PRD.PAGES
    occurred_at_col: timestamp
    ids:
      - select: "user_id"
        type: user_id
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
  - name: rsOrderCreated
    table: RUDDERSTACK_EVENTS.SHOPIFY_PRD.ORDER_CREATED
    occurred_at_col: timestamp
    ids:
      - select: "user_id"
        type: user_id
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
      - select: "upper(email)"
        type: email
        entity: user
      - select: "token"
        type: token
        entity: user
      - select: "checkout_token"
        type: token
        entity: user
      - select: "cart_token"
        type: cart_token
        entity: user
  - name: rsOrderCancelled
    table: RUDDERSTACK_EVENTS.SHOPIFY_PRD.ORDER_CANCELLED
    occurred_at_col: timestamp
    ids:
      - select: "user_id"
        type: user_id
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
      - select: "cart_token"
        type: cart_token
        entity: user
      - select: "token"
        type: token
        entity: user
      - select: "checkout_token"
        type: token
        entity: user
      - select: "upper(email)"
        type: email
        entity: user

  - name: rsCartUpdate
    table: RUDDERSTACK_EVENTS.SHOPIFY_PRD.CART_UPDATE
    occurred_at_col: timestamp
    ids:
      - select: "token"
        type: cart_token
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
  - name: rsCartCreate
    table: RUDDERSTACK_EVENTS.SHOPIFY_PRD.CART_CREATE
    occurred_at_col: timestamp
    ids:
      - select: "token"
        type: cart_token
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
  - name: rsTracksUnionPages
    view: RUDDERSTACK_SOURCE.IDENTITY_STITCHING.TRACKS_UNION_PAGES
    occurred_at_col: timestamp
    ids:
      - select: "user_id"
        type: user_id
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
  - name: rsCartCreatesUnionCartUpdate
    view: RUDDERSTACK_SOURCE.IDENTITY_STITCHING.CART_CREATE_UNION_CART_UPDATE
    occurred_at_col: timestamp
    ids:
      - select: "token"
        type: cart_token
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user

 
  - name: rsCartLineItems
    view: RUDDERSTACK_SOURCE.IDENTITY_STITCHING.CART_LINE_ITEMS
    occurred_at_col: timestamp
    ids:
      - select: "token"
        type: cart_token
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user

  # - name: shopifyCheckoutStarted
  #   table: RUDDERSTACK_EVENTS.SHOPIFY_PRD.CHECKOUT_STARTED
  #   occurred_at_col: timestamp
  #   ids:
  #     - select: "user_id"
  #       type: shopify_id
  #       entity: user
  #     - select: "anonymous_id"
  #       type: anonymous_id
  #       entity: user
  #     - select: "cart_token"
  #       type: token
  #       entity: user
  #     - select: "upper(email)"
  #       type: email 
  #       entity: user
  - name: iosPrdIdentifies
    table: RUDDERSTACK_EVENTS.IOS_PRD.IDENTIFIES
    occurred_at_col: timestamp
    ids:
      # - select: "user_id"
      - select: "user_id"
        type: user_id
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
      - select: "upper(email)"
        type: email
        entity: user
  - name: iosPrdTracks
    table: RUDDERSTACK_EVENTS.IOS_PRD.TRACKS
    occurred_at_col: timestamp
    ids:
      # - select: "user_id"
      - select: "user_id"
        type: user_id
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
      # - select: "upper(CONTEXT_TRAITS_EMAIL)"
      #   type: email
      #   entity: user

  - name: androidPrdIdentifies
    table: RUDDERSTACK_EVENTS.ANDROID_PRD.IDENTIFIES
    occurred_at_col: timestamp
    ids:
      # - select: "user_id"
      - select: "user_id"
        type: user_id
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
      - select: "upper(email)"
        type: email
        entity: user

  - name: androidPrdTracks
    table: RUDDERSTACK_EVENTS.ANDROID_PRD.TRACKS
    occurred_at_col: timestamp
    ids:
      # - select: "user_id"
      - select: "user_id"
        type: user_id
        entity: user
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
      # - select: "upper(CONTEXT_TRAITS_EMAIL)"
      #   type: email
      #   entity: user
  
  - name: rsFeaturesTable
    view: RUDDERSTACK_SOURCE.IDENTITY_STITCHING.incremental_features_view # Check  views/ folder for the creation query
    occurred_at_col: valid_at
    ids:
      - select: "anonymous_id"
        type: anonymous_id
        entity: user
      - select: "user_id"
        type: user_id
        entity: user
      - select: "cart_token"
        type: cart_token
        entity: user
      - select: "token"
        type: token
        entity: user
      - select: "email"
        type: email
        entity: user